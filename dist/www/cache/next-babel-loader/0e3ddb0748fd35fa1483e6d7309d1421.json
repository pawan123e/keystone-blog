{"ast":null,"code":"// Derived from https://github.com/zeit/next.js/tree/2789e7e0c25c72fbf6be3ef070e530186af14430/examples/with-apollo\nimport { ApolloClient } from 'apollo-client';\nimport { InMemoryCache } from 'apollo-cache-inmemory';\nimport { createUploadLink } from 'apollo-upload-client';\nimport fetch from 'isomorphic-unfetch';\nvar isBrowser = true; // TODO: server-side requests must have an absolute URI. We should find a way\n// to make this part of the project config, seems highly opinionated here\n\nvar uriHost = !isBrowser ? 'http://localhost:3000' : '';\nvar uri = \"\".concat(uriHost, \"/admin/api\");\nexport default function createApolloClient(initialState, ctx) {\n  // The `ctx` (NextPageContext) will only be present on the server.\n  // use it to extract auth headers (ctx.req) or similar.\n  return new ApolloClient({\n    ssrMode: Boolean(ctx),\n    link: createUploadLink({\n      uri: uri,\n      credentials: 'same-origin',\n      // Additional fetch() options like `credentials` or `headers`\n      fetch: fetch\n    }),\n    cache: new InMemoryCache().restore(initialState)\n  });\n}","map":{"version":3,"sources":["E:/web Developer Projects/keystone_blog/app/apolloClient.js"],"names":["ApolloClient","InMemoryCache","createUploadLink","fetch","isBrowser","uriHost","uri","createApolloClient","initialState","ctx","ssrMode","Boolean","link","credentials","cache","restore"],"mappings":"AAAA;AACA,SAASA,YAAT,QAA6B,eAA7B;AACA,SAASC,aAAT,QAA8B,uBAA9B;AACA,SAASC,gBAAT,QAAiC,sBAAjC;AACA,OAAOC,KAAP,MAAkB,oBAAlB;AAEA,IAAIC,SAAS,OAAb,C,CAEA;AACA;;AACA,IAAMC,OAAO,GAAG,CAACD,SAAD,GAAa,uBAAb,GAAuC,EAAvD;AACA,IAAME,GAAG,aAAMD,OAAN,eAAT;AAEA,eAAe,SAASE,kBAAT,CAA4BC,YAA5B,EAA0CC,GAA1C,EAA+C;AAC5D;AACA;AACA,SAAO,IAAIT,YAAJ,CAAiB;AACtBU,IAAAA,OAAO,EAAEC,OAAO,CAACF,GAAD,CADM;AAEtBG,IAAAA,IAAI,EAAEV,gBAAgB,CAAC;AACrBI,MAAAA,GAAG,EAAHA,GADqB;AAErBO,MAAAA,WAAW,EAAE,aAFQ;AAEO;AAC5BV,MAAAA,KAAK,EAALA;AAHqB,KAAD,CAFA;AAOtBW,IAAAA,KAAK,EAAE,IAAIb,aAAJ,GAAoBc,OAApB,CAA4BP,YAA5B;AAPe,GAAjB,CAAP;AASD","sourcesContent":["// Derived from https://github.com/zeit/next.js/tree/2789e7e0c25c72fbf6be3ef070e530186af14430/examples/with-apollo\nimport { ApolloClient } from 'apollo-client';\nimport { InMemoryCache } from 'apollo-cache-inmemory';\nimport { createUploadLink } from 'apollo-upload-client';\nimport fetch from 'isomorphic-unfetch';\n\nlet isBrowser = typeof window !== 'undefined';\n\n// TODO: server-side requests must have an absolute URI. We should find a way\n// to make this part of the project config, seems highly opinionated here\nconst uriHost = !isBrowser ? 'http://localhost:3000' : '';\nconst uri = `${uriHost}/admin/api`;\n\nexport default function createApolloClient(initialState, ctx) {\n  // The `ctx` (NextPageContext) will only be present on the server.\n  // use it to extract auth headers (ctx.req) or similar.\n  return new ApolloClient({\n    ssrMode: Boolean(ctx),\n    link: createUploadLink({\n      uri,\n      credentials: 'same-origin', // Additional fetch() options like `credentials` or `headers`\n      fetch,\n    }),\n    cache: new InMemoryCache().restore(initialState),\n  });\n}\n"]},"metadata":{},"sourceType":"module"}