{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport _taggedTemplateLiteral from \"@babel/runtime/helpers/esm/taggedTemplateLiteral\";\n\nvar _this = this,\n    _jsxFileName = \"E:\\\\web Developer Projects\\\\keystone_blog\\\\app\\\\pages\\\\post\\\\new.js\",\n    _s = $RefreshSig$();\n\nimport React from \"react\";\nvar __jsx = React.createElement;\n\nfunction _templateObject2() {\n  var data = _taggedTemplateLiteral([\"\\n    query {\\n      authenticatedUser {\\n        id\\n      }\\n    }\\n  \"]);\n\n  _templateObject2 = function _templateObject2() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject() {\n  var data = _taggedTemplateLiteral([\"\\n  mutation AddPost($title: String!, $body: String!, $posted: DateTime!, $image: Upload!) {\\n    createPost(data: { title: $title, body: $body, posted: $posted, image: $image }) {\\n      id\\n      slug\\n    }\\n  }\\n\"]);\n\n  _templateObject = function _templateObject() {\n    return data;\n  };\n\n  return data;\n}\n\n/** @jsx jsx */\nimport { jsx } from '@emotion/core';\nimport Link from 'next/link';\nimport gql from 'graphql-tag';\nimport { useMutation, useQuery } from '@apollo/react-hooks';\nimport { useState } from 'react';\nimport styled from '@emotion/styled';\nimport Layout from '../../templates/layout';\nimport { Banner } from '../../components/banner';\nimport { withApollo } from '../../lib/apollo';\nvar FormGroup = styled.div({\n  display: 'flex',\n  marginBottom: 8,\n  width: '100%',\n  maxWidth: 500\n});\n_c = FormGroup;\nvar Label = styled.label({\n  width: 200\n});\n_c2 = Label;\nvar Input = styled.input({\n  width: '100%',\n  padding: 8,\n  fontSize: '1em',\n  borderRadius: 4,\n  border: '1px solid hsl(200,20%,70%)'\n});\n_c3 = Input;\nvar ADD_POST = gql(_templateObject());\nexport default _c5 = withApollo(_c4 = _s(function () {\n  _s();\n\n  var _useState = useState(''),\n      title = _useState[0],\n      setTitle = _useState[1];\n\n  var _useState2 = useState(''),\n      body = _useState2[0],\n      setBody = _useState2[1];\n\n  var _useState3 = useState(''),\n      image = _useState3[0],\n      setImage = _useState3[1];\n\n  var _useState4 = useState(''),\n      slug = _useState4[0],\n      setSlug = _useState4[1];\n\n  var _useQuery = useQuery(gql(_templateObject2())),\n      data = _useQuery.data,\n      userLoading = _useQuery.loading,\n      userError = _useQuery.error;\n\n  var _useMutation = useMutation(ADD_POST, {\n    update: function update(cache, _ref) {\n      var createPost = _ref.data.createPost;\n      setSlug(createPost.slug);\n    }\n  }),\n      _useMutation2 = _slicedToArray(_useMutation, 2),\n      createPost = _useMutation2[0],\n      _useMutation2$ = _useMutation2[1],\n      saveError = _useMutation2$.error,\n      savingPost = _useMutation2$.loading;\n\n  var loggedIn = !userLoading && !!data.authenticatedUser;\n  var formDisabled = !loggedIn || savingPost;\n  var error = userError || saveError;\n  return jsx(Layout, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 5\n    }\n  }, jsx(\"div\", {\n    css: {\n      margin: '48px 0'\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 7\n    }\n  }, jsx(Link, {\n    href: \"/\",\n    passHref: true,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 9\n    }\n  }, jsx(\"a\", {\n    css: {\n      color: 'hsl(200,20%,50%)',\n      cursor: 'pointer'\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 11\n    }\n  }, '< Go Back')), jsx(\"h1\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 9\n    }\n  }, \"New Post\"), slug && jsx(Banner, {\n    style: \"success\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 11\n    }\n  }, jsx(\"strong\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 13\n    }\n  }, \"Success!\"), \" Post has been created.\", ' ', jsx(Link, {\n    href: \"/post/[slug]?slug=\".concat(slug),\n    as: \"/post/\".concat(slug),\n    passHref: true,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 13\n    }\n  }, jsx(\"a\", {\n    css: {\n      color: 'green'\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 15\n    }\n  }, \"Check it out\"))), userLoading ? jsx(\"p\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 11\n    }\n  }, \"loading...\") : jsx(React.Fragment, null, error && jsx(Banner, {\n    style: 'error',\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 15\n    }\n  }, jsx(\"strong\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 17\n    }\n  }, \"Whoops!\"), \" Something has gone wrong\", jsx(\"br\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 17\n    }\n  }), error.message || userError.toString()), !loggedIn && jsx(Banner, {\n    style: 'error',\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 15\n    }\n  }, jsx(\"a\", {\n    href: \"/signin\",\n    as: \"/signin\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 17\n    }\n  }, \"Sign In\"), ' ', \"to create a post.\"), jsx(\"form\", {\n    disabled: formDisabled,\n    onSubmit: function onSubmit(e) {\n      e.preventDefault();\n      createPost({\n        variables: {\n          title: title,\n          body: body,\n          image: image,\n          posted: new Date()\n        }\n      });\n      setTitle('');\n      setBody('');\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 13\n    }\n  }, jsx(FormGroup, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 15\n    }\n  }, jsx(Label, {\n    htmlFor: \"title\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 17\n    }\n  }, \"Title:\"), jsx(Input, {\n    disabled: formDisabled,\n    type: \"text\",\n    name: \"title\",\n    value: title,\n    onChange: function onChange(event) {\n      setTitle(event.target.value);\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 17\n    }\n  })), jsx(FormGroup, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 15\n    }\n  }, jsx(Label, {\n    htmlFor: \"body\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 17\n    }\n  }, \"Body:\"), jsx(\"textarea\", {\n    disabled: formDisabled,\n    css: {\n      width: '100%',\n      padding: 8,\n      fontSize: '1em',\n      borderRadius: 4,\n      border: '1px solid hsl(200,20%,70%)',\n      height: 200,\n      resize: 'none'\n    },\n    name: \"body\",\n    value: body,\n    onChange: function onChange(event) {\n      setBody(event.target.value);\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 17\n    }\n  })), jsx(FormGroup, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 153,\n      columnNumber: 15\n    }\n  }, jsx(Label, {\n    htmlFor: \"image\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 154,\n      columnNumber: 17\n    }\n  }, \"Image URL:\"), jsx(Input, {\n    disabled: formDisabled,\n    type: \"file\",\n    name: \"image\" // value={image}\n    ,\n    onChange: function onChange(event) {\n      setImage(event.target.files[0]);\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 155,\n      columnNumber: 17\n    }\n  })), jsx(\"input\", {\n    type: \"submit\",\n    value: \"submit\",\n    disabled: formDisabled,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 165,\n      columnNumber: 15\n    }\n  })))));\n}, \"44CzVCOPX9HOLUKIm6Nke0qJU3Q=\", false, function () {\n  return [useQuery, useMutation];\n}));\n\nvar _c, _c2, _c3, _c4, _c5;\n\n$RefreshReg$(_c, \"FormGroup\");\n$RefreshReg$(_c2, \"Label\");\n$RefreshReg$(_c3, \"Input\");\n$RefreshReg$(_c4, \"%default%$withApollo\");\n$RefreshReg$(_c5, \"%default%\");","map":{"version":3,"sources":["E:/web Developer Projects/keystone_blog/app/pages/post/new.js"],"names":["jsx","Link","gql","useMutation","useQuery","useState","styled","Layout","Banner","withApollo","FormGroup","div","display","marginBottom","width","maxWidth","Label","label","Input","input","padding","fontSize","borderRadius","border","ADD_POST","title","setTitle","body","setBody","image","setImage","slug","setSlug","data","userLoading","loading","userError","error","update","cache","createPost","saveError","savingPost","loggedIn","authenticatedUser","formDisabled","margin","color","cursor","message","toString","e","preventDefault","variables","posted","Date","event","target","value","height","resize","files"],"mappings":"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","sourcesContent":["/** @jsx jsx */\nimport { jsx } from '@emotion/core';\nimport Link from 'next/link';\n\nimport gql from 'graphql-tag';\nimport { useMutation, useQuery } from '@apollo/react-hooks';\nimport { useState } from 'react';\n\nimport styled from '@emotion/styled';\n\nimport Layout from '../../templates/layout';\nimport { Banner } from '../../components/banner';\n\nimport { withApollo } from '../../lib/apollo';\n\nconst FormGroup = styled.div({\n  display: 'flex',\n  marginBottom: 8,\n  width: '100%',\n  maxWidth: 500,\n});\n\nconst Label = styled.label({\n  width: 200,\n});\n\nconst Input = styled.input({\n  width: '100%',\n  padding: 8,\n  fontSize: '1em',\n  borderRadius: 4,\n  border: '1px solid hsl(200,20%,70%)',\n});\n\nconst ADD_POST = gql`\n  mutation AddPost($title: String!, $body: String!, $posted: DateTime!, $image: Upload!) {\n    createPost(data: { title: $title, body: $body, posted: $posted, image: $image }) {\n      id\n      slug\n    }\n  }\n`;\n\nexport default withApollo(() => {\n  const [title, setTitle] = useState('');\n  const [body, setBody] = useState('');\n  const [image, setImage] = useState('');\n  const [slug, setSlug] = useState('');\n\n  const { data, loading: userLoading, error: userError } = useQuery(gql`\n    query {\n      authenticatedUser {\n        id\n      }\n    }\n  `);\n\n  const [createPost, { error: saveError, loading: savingPost }] = useMutation(ADD_POST, {\n    update: (cache, { data: { createPost } }) => {\n      setSlug(createPost.slug);\n    },\n  });\n\n  const loggedIn = !userLoading && !!data.authenticatedUser;\n  const formDisabled = !loggedIn || savingPost;\n  const error = userError || saveError;\n\n  return (\n    <Layout>\n      <div css={{ margin: '48px 0' }}>\n        <Link href=\"/\" passHref>\n          <a css={{ color: 'hsl(200,20%,50%)', cursor: 'pointer' }}>{'< Go Back'}</a>\n        </Link>\n        <h1>New Post</h1>\n\n        {slug && (\n          <Banner style=\"success\">\n            <strong>Success!</strong> Post has been created.{' '}\n            <Link href={`/post/[slug]?slug=${slug}`} as={`/post/${slug}`} passHref>\n              <a css={{ color: 'green' }}>Check it out</a>\n            </Link>\n          </Banner>\n        )}\n\n        {userLoading ? (\n          <p>loading...</p>\n        ) : (\n          <>\n            {error && (\n              <Banner style={'error'}>\n                <strong>Whoops!</strong> Something has gone wrong\n                <br />\n                {error.message || userError.toString()}\n              </Banner>\n            )}\n            {!loggedIn && (\n              <Banner style={'error'}>\n                <a href=\"/signin\" as=\"/signin\">\n                  Sign In\n                </a>{' '}\n                to create a post.\n              </Banner>\n            )}\n            <form\n              disabled={formDisabled}\n              onSubmit={e => {\n                e.preventDefault();\n                createPost({\n                  variables: {\n                    title,\n                    body,\n                    image,\n                    posted: new Date(),\n                  },\n                });\n\n                setTitle('');\n                setBody('');\n              }}\n            >\n              <FormGroup>\n                <Label htmlFor=\"title\">Title:</Label>\n                <Input\n                  disabled={formDisabled}\n                  type=\"text\"\n                  name=\"title\"\n                  value={title}\n                  onChange={event => {\n                    setTitle(event.target.value);\n                  }}\n                />\n              </FormGroup>\n              <FormGroup>\n                <Label htmlFor=\"body\">Body:</Label>\n                <textarea\n                  disabled={formDisabled}\n                  css={{\n                    width: '100%',\n                    padding: 8,\n                    fontSize: '1em',\n                    borderRadius: 4,\n                    border: '1px solid hsl(200,20%,70%)',\n                    height: 200,\n                    resize: 'none',\n                  }}\n                  name=\"body\"\n                  value={body}\n                  onChange={event => {\n                    setBody(event.target.value);\n                  }}\n                />\n              </FormGroup>\n              <FormGroup>\n                <Label htmlFor=\"image\">Image URL:</Label>\n                <Input\n                  disabled={formDisabled}\n                  type=\"file\"\n                  name=\"image\"\n                  // value={image}\n                  onChange={event => {\n                    setImage(event.target.files[0]);\n                  }}\n                />\n              </FormGroup>\n              <input type=\"submit\" value=\"submit\" disabled={formDisabled} />\n            </form>\n          </>\n        )}\n      </div>\n    </Layout>\n  );\n});\n"]},"metadata":{},"sourceType":"module"}