{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport _taggedTemplateLiteral from \"@babel/runtime/helpers/esm/taggedTemplateLiteral\";\n\nvar _this = this,\n    _jsxFileName = \"E:\\\\web Developer Projects\\\\keystone_blog\\\\app\\\\pages\\\\signin.js\",\n    _s = $RefreshSig$();\n\nimport React from \"react\";\nvar __jsx = React.createElement;\n\nfunction _templateObject2() {\n  var data = _taggedTemplateLiteral([\"\\n  query authenticatedUser {\\n    authenticatedUser {\\n      id\\n    }\\n  }\\n\"]);\n\n  _templateObject2 = function _templateObject2() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject() {\n  var data = _taggedTemplateLiteral([\"\\n  mutation authenticate($email: String!, $password: String!) {\\n    authenticateUserWithPassword(email: $email, password: $password) {\\n      item {\\n        id\\n      }\\n    }\\n  }\\n\"]);\n\n  _templateObject = function _templateObject() {\n    return data;\n  };\n\n  return data;\n}\n\n/** @jsx jsx */\nimport { jsx } from '@emotion/core';\nimport Link from 'next/link';\nimport gql from 'graphql-tag';\nimport { useMutation, useQuery } from '@apollo/react-hooks';\nimport { useState } from 'react';\nimport styled from '@emotion/styled';\nimport Layout from '../templates/layout';\nimport { Banner } from '../components/banner';\nimport { withApollo } from '../lib/apollo';\nvar FormGroup = styled.div({\n  display: 'flex',\n  marginBottom: 8,\n  width: '100%',\n  maxWidth: 500\n});\n_c = FormGroup;\nvar Label = styled.label({\n  width: 200\n});\n_c2 = Label;\nvar Input = styled.input({\n  width: '100%',\n  padding: 8,\n  fontSize: '1em',\n  borderRadius: 4,\n  border: '1px solid hsl(200,20%,70%)'\n});\n_c3 = Input;\nvar AUTHENTICATE = gql(_templateObject());\nvar AUTHENTICATED_USER = gql(_templateObject2());\nexport default _c5 = withApollo(_c4 = _s(function () {\n  _s();\n\n  var _useState = useState('user@keystonejs.com'),\n      email = _useState[0],\n      setEmail = _useState[1];\n\n  var _useState2 = useState('password'),\n      password = _useState2[0],\n      setPassword = _useState2[1];\n\n  var _useQuery = useQuery(AUTHENTICATED_USER),\n      _useQuery$data = _useQuery.data;\n\n  _useQuery$data = _useQuery$data === void 0 ? {} : _useQuery$data;\n  var authenticatedUser = _useQuery$data.authenticatedUser,\n      loading = _useQuery.loading,\n      error = _useQuery.error;\n\n  var _useMutation = useMutation(AUTHENTICATE, {\n    refetchQueries: ['authenticatedUser']\n  }),\n      _useMutation2 = _slicedToArray(_useMutation, 2),\n      authenticate = _useMutation2[0],\n      _useMutation2$ = _useMutation2[1],\n      signingIn = _useMutation2$.loading,\n      signinError = _useMutation2$.error;\n\n  return jsx(Layout, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 5\n    }\n  }, jsx(\"div\", {\n    css: {\n      margin: '48px 0'\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 7\n    }\n  }, jsx(Link, {\n    href: \"/\",\n    passHref: true,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 9\n    }\n  }, jsx(\"a\", {\n    css: {\n      color: 'hsl(200,20%,50%)',\n      cursor: 'pointer'\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 11\n    }\n  }, '< Home')), jsx(\"h1\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 9\n    }\n  }, \"Sign In\"), loading || signingIn ? jsx(\"p\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 11\n    }\n  }, \"loading...\") : error || signinError ? jsx(\"p\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 11\n    }\n  }, \"Error!\") : authenticatedUser ? jsx(Banner, {\n    style: 'success',\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 11\n    }\n  }, \"\\u2705 Signed In\", jsx(\"br\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 13\n    }\n  }), jsx(\"a\", {\n    href: \"/\",\n    as: \"/\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 13\n    }\n  }, \"Go home\"), ' ', \"|\", ' ', jsx(\"a\", {\n    href: \"/post/new\",\n    as: \"/post/new\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 13\n    }\n  }, \"Create new post\")) : jsx(\"form\", {\n    onSubmit: function onSubmit(e) {\n      e.preventDefault();\n      authenticate({\n        variables: {\n          email: email,\n          password: password\n        }\n      });\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 11\n    }\n  }, jsx(FormGroup, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 13\n    }\n  }, jsx(Label, {\n    htmlFor: \"email\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 15\n    }\n  }, \"Email:\"), jsx(Input, {\n    type: \"text\",\n    name: \"email\",\n    value: email,\n    onChange: function onChange(event) {\n      setEmail(event.target.value);\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 15\n    }\n  })), jsx(FormGroup, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 13\n    }\n  }, jsx(Label, {\n    htmlFor: \"password\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 15\n    }\n  }, \"Password:\"), jsx(Input, {\n    type: \"password\",\n    name: \"password\",\n    value: password,\n    onChange: function onChange(event) {\n      setPassword(event.target.value);\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 15\n    }\n  })), jsx(\"input\", {\n    type: \"submit\",\n    value: \"submit\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 13\n    }\n  }))));\n}, \"acrmWeBpbYK1G8od7thWDExB8x4=\", false, function () {\n  return [useQuery, useMutation];\n}));\n\nvar _c, _c2, _c3, _c4, _c5;\n\n$RefreshReg$(_c, \"FormGroup\");\n$RefreshReg$(_c2, \"Label\");\n$RefreshReg$(_c3, \"Input\");\n$RefreshReg$(_c4, \"%default%$withApollo\");\n$RefreshReg$(_c5, \"%default%\");","map":{"version":3,"sources":["E:/web Developer Projects/keystone_blog/app/pages/signin.js"],"names":["jsx","Link","gql","useMutation","useQuery","useState","styled","Layout","Banner","withApollo","FormGroup","div","display","marginBottom","width","maxWidth","Label","label","Input","input","padding","fontSize","borderRadius","border","AUTHENTICATE","AUTHENTICATED_USER","email","setEmail","password","setPassword","data","authenticatedUser","loading","error","refetchQueries","authenticate","signingIn","signinError","margin","color","cursor","e","preventDefault","variables","event","target","value"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA,SAASA,GAAT,QAAoB,eAApB;AACA,OAAOC,IAAP,MAAiB,WAAjB;AAEA,OAAOC,GAAP,MAAgB,aAAhB;AACA,SAASC,WAAT,EAAsBC,QAAtB,QAAsC,qBAAtC;AACA,SAASC,QAAT,QAAyB,OAAzB;AAEA,OAAOC,MAAP,MAAmB,iBAAnB;AAEA,OAAOC,MAAP,MAAmB,qBAAnB;AACA,SAASC,MAAT,QAAuB,sBAAvB;AACA,SAASC,UAAT,QAA2B,eAA3B;AAEA,IAAMC,SAAS,GAAGJ,MAAM,CAACK,GAAP,CAAW;AAC3BC,EAAAA,OAAO,EAAE,MADkB;AAE3BC,EAAAA,YAAY,EAAE,CAFa;AAG3BC,EAAAA,KAAK,EAAE,MAHoB;AAI3BC,EAAAA,QAAQ,EAAE;AAJiB,CAAX,CAAlB;KAAML,S;AAON,IAAMM,KAAK,GAAGV,MAAM,CAACW,KAAP,CAAa;AACzBH,EAAAA,KAAK,EAAE;AADkB,CAAb,CAAd;MAAME,K;AAIN,IAAME,KAAK,GAAGZ,MAAM,CAACa,KAAP,CAAa;AACzBL,EAAAA,KAAK,EAAE,MADkB;AAEzBM,EAAAA,OAAO,EAAE,CAFgB;AAGzBC,EAAAA,QAAQ,EAAE,KAHe;AAIzBC,EAAAA,YAAY,EAAE,CAJW;AAKzBC,EAAAA,MAAM,EAAE;AALiB,CAAb,CAAd;MAAML,K;AAQN,IAAMM,YAAY,GAAGtB,GAAH,mBAAlB;AAUA,IAAMuB,kBAAkB,GAAGvB,GAAH,oBAAxB;AAQA,qBAAeO,UAAU,UAAC,YAAM;AAAA;;AAAA,kBACJJ,QAAQ,CAAC,qBAAD,CADJ;AAAA,MACvBqB,KADuB;AAAA,MAChBC,QADgB;;AAAA,mBAEEtB,QAAQ,CAAC,UAAD,CAFV;AAAA,MAEvBuB,QAFuB;AAAA,MAEbC,WAFa;;AAAA,kBAI+BzB,QAAQ,CAACqB,kBAAD,CAJvC;AAAA,iCAItBK,IAJsB;;AAAA,+CAIQ,EAJR;AAAA,MAIdC,iBAJc,kBAIdA,iBAJc;AAAA,MAIYC,OAJZ,aAIYA,OAJZ;AAAA,MAIqBC,KAJrB,aAIqBA,KAJrB;;AAAA,qBAKqC9B,WAAW,CAACqB,YAAD,EAAe;AAC3FU,IAAAA,cAAc,EAAE,CAAC,mBAAD;AAD2E,GAAf,CALhD;AAAA;AAAA,MAKvBC,YALuB;AAAA;AAAA,MAKEC,SALF,kBAKPJ,OALO;AAAA,MAKoBK,WALpB,kBAKaJ,KALb;;AAS9B,SACE,IAAC,MAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE;AAAK,IAAA,GAAG,EAAE;AAAEK,MAAAA,MAAM,EAAE;AAAV,KAAV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,IAAC,IAAD;AAAM,IAAA,IAAI,EAAC,GAAX;AAAe,IAAA,QAAQ,MAAvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE;AAAG,IAAA,GAAG,EAAE;AAAEC,MAAAA,KAAK,EAAE,kBAAT;AAA6BC,MAAAA,MAAM,EAAE;AAArC,KAAR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAA2D,QAA3D,CADF,CADF,EAIE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eAJF,EAMGR,OAAO,IAAII,SAAX,GACC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBADD,GAEGH,KAAK,IAAII,WAAT,GACF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cADE,GAEAN,iBAAiB,GACnB,IAAC,MAAD;AAAQ,IAAA,KAAK,EAAE,SAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,yBAEE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAFF,EAGE;AAAG,IAAA,IAAI,EAAC,GAAR;AAAY,IAAA,EAAE,EAAC,GAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eAHF,EAKO,GALP,OAMI,GANJ,EAOE;AAAG,IAAA,IAAI,EAAC,WAAR;AAAoB,IAAA,EAAE,EAAC,WAAvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBAPF,CADmB,GAanB;AACE,IAAA,QAAQ,EAAE,kBAAAU,CAAC,EAAI;AACbA,MAAAA,CAAC,CAACC,cAAF;AACAP,MAAAA,YAAY,CAAC;AACXQ,QAAAA,SAAS,EAAE;AACTjB,UAAAA,KAAK,EAALA,KADS;AAETE,UAAAA,QAAQ,EAARA;AAFS;AADA,OAAD,CAAZ;AAMD,KATH;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAWE,IAAC,SAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,IAAC,KAAD;AAAO,IAAA,OAAO,EAAC,OAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cADF,EAEE,IAAC,KAAD;AACE,IAAA,IAAI,EAAC,MADP;AAEE,IAAA,IAAI,EAAC,OAFP;AAGE,IAAA,KAAK,EAAEF,KAHT;AAIE,IAAA,QAAQ,EAAE,kBAAAkB,KAAK,EAAI;AACjBjB,MAAAA,QAAQ,CAACiB,KAAK,CAACC,MAAN,CAAaC,KAAd,CAAR;AACD,KANH;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAFF,CAXF,EAsBE,IAAC,SAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,IAAC,KAAD;AAAO,IAAA,OAAO,EAAC,UAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iBADF,EAEE,IAAC,KAAD;AACE,IAAA,IAAI,EAAC,UADP;AAEE,IAAA,IAAI,EAAC,UAFP;AAGE,IAAA,KAAK,EAAElB,QAHT;AAIE,IAAA,QAAQ,EAAE,kBAAAgB,KAAK,EAAI;AACjBf,MAAAA,WAAW,CAACe,KAAK,CAACC,MAAN,CAAaC,KAAd,CAAX;AACD,KANH;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAFF,CAtBF,EAiCE;AAAO,IAAA,IAAI,EAAC,QAAZ;AAAqB,IAAA,KAAK,EAAC,QAA3B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAjCF,CAvBJ,CADF,CADF;AAgED,CAzEwB;AAAA,UAIsC1C,QAJtC,EAK4CD,WAL5C;AAAA,GAAzB","sourcesContent":["/** @jsx jsx */\nimport { jsx } from '@emotion/core';\nimport Link from 'next/link';\n\nimport gql from 'graphql-tag';\nimport { useMutation, useQuery } from '@apollo/react-hooks';\nimport { useState } from 'react';\n\nimport styled from '@emotion/styled';\n\nimport Layout from '../templates/layout';\nimport { Banner } from '../components/banner';\nimport { withApollo } from '../lib/apollo';\n\nconst FormGroup = styled.div({\n  display: 'flex',\n  marginBottom: 8,\n  width: '100%',\n  maxWidth: 500,\n});\n\nconst Label = styled.label({\n  width: 200,\n});\n\nconst Input = styled.input({\n  width: '100%',\n  padding: 8,\n  fontSize: '1em',\n  borderRadius: 4,\n  border: '1px solid hsl(200,20%,70%)',\n});\n\nconst AUTHENTICATE = gql`\n  mutation authenticate($email: String!, $password: String!) {\n    authenticateUserWithPassword(email: $email, password: $password) {\n      item {\n        id\n      }\n    }\n  }\n`;\n\nconst AUTHENTICATED_USER = gql`\n  query authenticatedUser {\n    authenticatedUser {\n      id\n    }\n  }\n`;\n\nexport default withApollo(() => {\n  const [email, setEmail] = useState('user@keystonejs.com');\n  const [password, setPassword] = useState('password');\n\n  const { data: { authenticatedUser } = {}, loading, error } = useQuery(AUTHENTICATED_USER);\n  const [authenticate, { loading: signingIn, error: signinError }] = useMutation(AUTHENTICATE, {\n    refetchQueries: ['authenticatedUser'],\n  });\n\n  return (\n    <Layout>\n      <div css={{ margin: '48px 0' }}>\n        <Link href=\"/\" passHref>\n          <a css={{ color: 'hsl(200,20%,50%)', cursor: 'pointer' }}>{'< Home'}</a>\n        </Link>\n        <h1>Sign In</h1>\n\n        {loading || signingIn ? (\n          <p>loading...</p>\n        ) : error || signinError ? (\n          <p>Error!</p>\n        ) : authenticatedUser ? (\n          <Banner style={'success'}>\n            âœ… Signed In\n            <br />\n            <a href=\"/\" as=\"/\">\n              Go home\n            </a>{' '}\n            |{' '}\n            <a href=\"/post/new\" as=\"/post/new\">\n              Create new post\n            </a>\n          </Banner>\n        ) : (\n          <form\n            onSubmit={e => {\n              e.preventDefault();\n              authenticate({\n                variables: {\n                  email,\n                  password,\n                },\n              });\n            }}\n          >\n            <FormGroup>\n              <Label htmlFor=\"email\">Email:</Label>\n              <Input\n                type=\"text\"\n                name=\"email\"\n                value={email}\n                onChange={event => {\n                  setEmail(event.target.value);\n                }}\n              />\n            </FormGroup>\n            <FormGroup>\n              <Label htmlFor=\"password\">Password:</Label>\n              <Input\n                type=\"password\"\n                name=\"password\"\n                value={password}\n                onChange={event => {\n                  setPassword(event.target.value);\n                }}\n              />\n            </FormGroup>\n            <input type=\"submit\" value=\"submit\" />\n          </form>\n        )}\n      </div>\n    </Layout>\n  );\n});\n"]},"metadata":{},"sourceType":"module"}